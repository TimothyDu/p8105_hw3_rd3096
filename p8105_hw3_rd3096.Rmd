---
title: "p8105_hw3_rd3096"
output: github_document
---

# load necessary pakages 
```{r setup}
library(tidyverse)
library(ggridges)
library(patchwork)
library(ggplot2)

library(p8105.datasets)
data("ny_noaa")

knitr::opts_chunk$set(
	echo = TRUE,
	warning = FALSE,
	fig.width = 8, 
  fig.height = 6,
  out.width = "90%"
)

theme_set(theme_minimal() + theme(legend.position = "bottom"))

options(
  ggplot2.continuous.colour = "viridis",
  ggplot2.continuous.fill = "viridis"
)

scale_colour_discrete = scale_colour_viridis_d
scale_fill_discrete = scale_fill_viridis_d
```

## problem 1

### read and explore the dataset "ny_noaa"

we explore the dataset and get a summary of the dataset

```{r}
str(ny_noaa)
summary(ny_noaa)
```

### we write a short description of the dataset and answer the following questions

Our dataset ahs `r nrow(ny_noaa)` rows and `r ncol(ny_noaa)` columns.It includes key variables such as id (station identifier), date, prcp (precipitation), snow (snowfall), snwd (snow depth), tmax (maximum temperature), and tmin (minimum temperature)."
The variable types based on our output are listed as follows:

* id: character

* date: Date format

* prcp, snow, snwd: integer

* tmax, tmin: character (we wil convert these into numeric later for proper analysis).

Missing data is a significant issue in the ny_noaa dataset, especially for snow depth (snwd) and snowfall (snow), Precipitation has less missing data, but it still affects a non-negligible portion of the dataset.

we will do some data cleaning for subquestion 1

```{r}
ny_noaa_cleaned = 
  ny_noaa %>%
  separate(date, into = c("year", "month", "day"), convert = TRUE) %>%
  mutate(
    tmax = as.numeric(tmax),    
    tmin = as.numeric(tmin)               
  )

ny_noaa_cleaned %>%
  group_by(snow) %>%
  summarize(count = n()) %>%
  arrange(desc(count))
```
After we cleaned our dataset, CONVERT the variables into numeric and count the number of observed values, we found out:

1. 0 mm of snowfall is the most frequently observed value, with 2,008,508 instances. This is because many days throughout the year do not experience snowfall, especially during non-winter months and in areas where snow is rare.

2. There are 381,221 missing values (NA) in the dataset for snowfall. These might correspond to missing data for days or locations where snowfall was not recorded.

3. Other common values include 25 mm, 13 mm, and 51 mm of snowfall, which likely represent light to moderate snowfall amounts. These values are typical during days when snow does occur, especially in regions that experience winter weather regularly.

we will make a two-panel plot for subquestion2
```{r}
ny_noaa_plot=
  ny_noaa_cleaned %>%
  filter(month %in% c(1, 7)) %>%
  group_by(id, year, month) %>%
  summarize(avg_tmax = mean(tmax, na.rm = TRUE), .groups = 'drop') %>% 
  ggplot(aes(x = year, y = avg_tmax, color = id)) +
  geom_point()+
  geom_line()+
  facet_grid(. ~ month)+
  labs(
      title = "Mean Monthly Temperature for Each Station Across Years (January and July)",
    x = "Year",
    y = "Mean Max Temperature (Â°C)",
    color = "Station"
  ) +
  theme_minimal()

```


